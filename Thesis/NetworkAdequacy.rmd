## Network Adequacy

The trilateration index was originally designed to improve efficiency of the "network adequacy" (NA) problem for health care.  Network adequacy is a common legal requirement for medicare or insurance companies with constraints such as:

* 90% of members must live within 50 miles of a covered emergency room
* 80% of female members over the age of 13 must live within 25 miles of a covered OB/GYN
* 80% of members under the age of 16 must live within 25 miles of a covered pediatrician
* etc.

Note that these are all illustrative examples; the real "Medicare Advantage Network Adequacy Criteria Guidance" document for example, is a 75 page document.

Similar requirements, legal or otherwise, show up in cellular network and satellite communication technology (numbers are illustrative):

* Maximize the number of people living within 10 miles of a 5G cell tower
* 100% of all major highways should be within 5 miles of a 4G cell tower
* There must be at least 2 satellites within 200 km of a point 450 km directly above every ground station for satellite network connectivity at any given time
* There must be at least 1 satellite with access to a ground station within 50 km of a point 450 km directly above as many households as possible at any given time

The nearest-neighbor problem was called the "Post-Office Problem" in early incarnations, and the system of post offices lends itself to a similar construction:
* Ensure that all US Postal addresses are within range of a post office 

and so forth.


### Formalization of Network Adequacy

We formalize the concept of "Network Adequacy" mathematically:

#### Network Adequacy Definition

Given a non-empty set of points $P$ and a non-empty set of query points $Q$ in a metric space $M$ (where $P \cap Q$ comprises the 'network'), the network is 'completely adequate' for a distance $d$ and a distance function $D(a, b)$ describing the distance between points $a$ and $b$ for $a \in M$ and $b \in M$ if for every point $q$ (where $q \in Q$) $\exists$ at least one point $p$ ($p \in P$) $\ni D(p, q) <= d$.  Otherwise the network is 'inadequate'.

We call a single point $q$ 'adequate' itself, if it satisfies the same condition -- i.e. $\exists$ at least one point $p$ ($p \in P$) $D(p, q) <= d$.


#### Network Adequacy Percent

If, within $P$, we consider the largest subset $P' \in P$ where $P'$ is 'completely adequate',  then $P$ has a "Network Adequacy Percent (NAP)" of $|P'|/|P|$.  Note that $P'$ can be defined (identically) as the union of all 'adequate' points $p \in P$.

#### Network Adequacy Threshold
We can generalize this slightly more by describing a network as 'adequate with threshold $T$' by introducing a percent $T$ ($0<=T<=1$) such that the same network is adequate if at least $T*|Q|$ (or $T$ percent of points in $Q$) are individually 'adequate'.

Another way of saying this is that the netwrk is 'adequate with threshold $T$' if the Network Adequacy Percent ${NAP} > T$.

In this case, if $T == 1$ we have the original case.  If $T == 0$ we have a trivial case where the network is always adequate (even if $Q$ and/or $P$ are empty, which is generally disallowed).


#### Solving NA Using NN Algorithms

Generally, using $NN$ techniques, the brute-force is iterative: for each point $q$, find the nearest point $p$ and if $D(p, q) < d$ count it as conforming, otherwise count it as non-conforming. We then calculate the ratio of $r = \frac{conforming} {|Q|}$ to determing whether $r >= T$ or not.

If we set $m = |Q|$ and $n = |P|$, and if we use a Nearest-Neighbor algorithm with $O(n\ log\ n)$ then the time complexity for Network Adequacy becomes $O(m*n\ log\ n)$.

In the worst-case, we cannot improve on this, however we can introduce what we believe are novel algorithms, based on the Trilateration Index, which execute efficiently compared to this iterative approach, by deeply reducing the search space and number of times the distance functions must be called in typical real-world cases.  Also, trivially, it is unnecessary to find the nearest point $p$, merely prove that at least one such point exists (or none exists) for a given $q$.
